[![Build Status](https://travis-ci.org/csnover/dojo2-teststack.png?branch=master)](https://travis-ci.org/csnover/dojo2-teststack)

# The Dojo Test Stack

The Dojo Test Stack is a collection of JavaScript modules designed to work together to help you write consistent,
high-quality test cases for your JavaScript libraries and applications. Dojo Test Stack uses Dojo but can be used to test *any* JavaScript code. Its functional testing interface can even
be used to test non-JavaScript Web apps if you really want.

## Features

* 100% [AMD](https://github.com/amdjs/amdjs-api/wiki/AMD), 100% Promises/A-based API
* Instant one-off test execution in the browser or Node.js
* Full statement, branch, function, and line code coverage reporting with
  [Istanbul](https://github.com/gotwarlost/istanbul)
* Functional testing using the standard [WebDriver API](http://www.w3.org/TR/webdriver/) with a fluid, promises-wrapped
  [WD.js](https://github.com/admc/wd)
* Integration with [Sauce Labs](http://saucelabs.com/) for super simple continuous integration
* Tested with [Travis CI](http://travis-ci.org/)
* Extensible interfaces (comes with TDD, BDD, and objects)
* Extensible reporters (comes with basic console and WebDriver reporters, lcov and tap output planned)
* Extensible assertions using the [Chai Assertion Library](http://chaijs.com)

## Comparison

<table>
<tr>
	<th>Feature</th>
	<th><a href="https://github.com/csnover/dojo2-teststack">Test Stack</a></th>
	<th><a href="http://qunitjs.com">QUnit</a></th>
	<th><a href="http://visionmedia.github.com/mocha/">Mocha</a></th>
	<th><a href="http://pivotal.github.com/jasmine/">Jasmine</a></th>
	<th><a href="http://busterjs.org">BusterJS</a></th>
	<th><a href="http://testacular.github.com/">Testacular</a></th>
</tr>
<tr>
	<th scope="row">Code coverage analysis</th>
	<td>Yes</td>
	<td>No</td>
	<td>Yes</td>
	<td>No</td>
	<td>Extension</td>
	<td>Yes</td>
</tr>
<tr>
	<th scope="row">True<sup><a name="rev1" href="#ref1">1</a></sup> browser events</th>
	<td>Yes</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
</tr>
<tr>
	<th scope="row">Native AMD support</th>
	<td>Yes</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>Extension</td>
	<td>Extension</td>
</tr>
<tr>
	<th scope="row">Stand-alone<sup><a name="rev2" href="#ref2">2</a></sup> browser support</th>
	<td>Yes</td>
	<td>Yes</td>
	<td>Build required</td>
	<td>Build required</td>
	<td>No</td>
	<td>No</td>
</tr>
<tr>
	<th scope="row">Node.js support</th>
	<td>Yes</td>
	<td>No<sup><a name="rev3" href="#ref3">3</a></sup></td>
	<td>Yes</td>
	<td>Yes</td>
	<td>Yes</td>
	<td>Yes</td>
</tr>
<tr>
	<th scope="row">Any<sup><a name="rev4" href="#ref4">4</a></sup> assertion library</th>
	<td>Yes</td>
	<td>No</td>
	<td>Yes</td>
	<td>No</td>
	<td>Yes</td>
	<td>N/A</td>
</tr>
<tr>
	<th scope="row">Default test interface</th>
	<td>TDD, BDD, object</td>
	<td>TDD</td>
	<td>TDD, BDD, object</td>
	<td>BDD</td>
	<td>xUnit</td>
	<td>N/A</td>
</tr>
<tr>
	<th scope="row">Extensible test interfaces</th>
	<td>Yes</td>
	<td>No</td>
	<td>Yes</td>
	<td>No</td>
	<td>Yes</td>
	<td>N/A</td>
</tr>
<tr>
	<th scope="row">Extensible reporters</th>
	<td>Yes</td>
	<td>No</td>
	<td>Yes</td>
	<td>No</td>
	<td>Yes</td>
	<td>N/A</td>
</tr>
<tr>
	<th scope="row">Asynchronous support</th>
	<td>Promises</td>
	<td>Globals</td>
	<td>Callbacks</td>
	<td>Polling</td>
	<td>Callbacks</td>
	<td>Callbacks</td>
</tr>
<tr>
	<th scope="row">Selenium support</th>
	<td>Yes</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
</tr>
<tr>
	<th scope="row">Built-in CI support</th>
	<td>Yes</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>Yes</td>
	<td>Yes</td>
</tr>
<tr>
	<th scope="row">Built-in Sauce Labs integration</th>
	<td>Yes</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
</tr>
<tr>
	<th scope="row">Built-in Travis CI integration</th>
	<td>Yes</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>No</td>
	<td>Yes</td>
</tr>
<tr>
	<th scope="row">Grunt support</th>
	<td>Yes</td>
	<td>3rd party</td>
	<td>3rd party</td>
	<td>3rd party</td>
	<td>3rd party</td>
	<td>3rd party</td>
</tr>
</table>

<a name="ref1" href="#rev1">1</a>: True events are not generated by JavaScript within the sandbox, so are able to accurately emulate how a user
      actually interacts with the application. Synthetic events generated by other test frameworks are limited by
	  browser security restrictions.

<a name="ref2" href="#rev2">2</a>: Stand-alone means that unit tests can be executed in a browser by navigating to a URL without needing any special
      HTTP server or proxy for support.

<a name="ref3" href="#rev3">3</a>: Some older versions of QUnit can be used in conjunction with a 3rd party module to run on Node.js, but newer
      versions do not support Node.js and will break even with the use of 3rd party modules.

<a name="ref4" href="#rev4">4</a>: If it throws an error on failure, it works with Test Stack.

## This repository

This repository is an experimental repository for the next major version of the Dojo Toolkit. Please feel free to start
using it as long as you can put up with some API churn until it reaches alpha.


## Do you hate kittens and love old IE?

If you need to support IE 6–8, there is also a
[version of teststack for legacy browsers](https://github.com/csnover/dojo2-teststack/tree/geezer "geezer branch"), but
please, for the sake of the kittens, stop supporting those browsers already.


## Getting started

### Installation
1. Clone teststack as a sibling directory of the package that's going to be tested.
<pre>
git clone --recursive https://github.com/csnover/dojo2-teststack.git
</pre>
2. Use npm to grab all production dependencies.
<pre>
cd dojo2-teststack
npm install --production
</pre>

### Configuration

dojo2-teststack uses a single JavaScript file for all configuration. This file should be located within the project being tested. For more information on teststack the teststack config, see a [sample configuration file](https://github.com/csnover/dojo2-teststack/blob/master/test/teststack.js) and [full documentation](https://github.com/csnover/dojo2-teststack/wiki/Configuring-Test-Stack). 

### Writing tests

dojo2-teststack currently comes with support for three different test interface: TDD, BDD, and object. Internally,
all interfaces generate the same testing structures, so you can use whichever interface you feel matches your
preference. Further, dojo2-teststack supports *functional* testing that can drive mock user interactions on a given test page. More information on each type of test can be found below.

* [bdd](https://github.com/bitpshr/dojo2-teststack/wiki/BDD-Tests)
* [tdd](https://github.com/bitpshr/dojo2-teststack/wiki/TDD-Tests)
* [object](https://github.com/bitpshr/dojo2-teststack/wiki/Object-Tests)
* [functional](https://github.com/bitpshr/dojo2-teststack/wiki/Functional-Tests)

### Running tests

dojo2-teststack tests can be run as a stanalone browser client, a standalone node client, or as a full-featured test runner for multi-platform coverage and optional continuous integration. Running tests is easy, and specific instructions on how to do so can be found below.

* [browser client](https://github.com/csnover/dojo2-teststack/wiki/Running-Test-Stack#as-a-stand-alone-browser-client)
* [node client](https://github.com/csnover/dojo2-teststack/wiki/Running-Test-Stack#as-a-stand-alone-nodejs-client)
* [coverage proxy only](https://github.com/csnover/dojo2-teststack/wiki/Running-Test-Stack#as-an-instrumenting-proxy-for-generating-code-coverage-data)
* [multi-platform runner](https://github.com/csnover/dojo2-teststack/wiki/Running-Test-Stack#as-a-test-runner-for-multi-platform-testing)
* [continuous integration](https://github.com/csnover/dojo2-teststack/wiki/Running-Test-Stack#as-a-test-runner-for-continuous-integration)

## License

New BSD License © 2012–2013 Colin Snover http://zetafleet.com. Released under
[Dojo Foundation CLA](http://dojofoundation.org/about/cla).