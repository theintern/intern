{
  "$schema": "./schemas/config.json",

  "description": "Run tests on Node, excluding the benchmark tests",

  "coverage": ["src/**/*.ts", "!src/browser/**/*.ts"],

  "suites": [
    "tests/benchmark/example.ts",
    "tests/unit/core/lib/BenchmarkTest.ts",
    "tests/unit/core/lib/Channel.ts",
    "tests/unit/core/lib/Deferred.ts",
    "tests/unit/core/lib/Environment.ts",
    "tests/unit/core/lib/Suite.ts",
    "tests/unit/core/lib/Test.ts",
    "tests/unit/core/lib/channels/**/*.ts",
    "tests/unit/core/lib/common/**/*.ts",
    "tests/unit/core/lib/executors/Executor.ts",
    "tests/unit/core/lib/interfaces/**/*.ts",
    "tests/unit/core/lib/reporters/Console.ts",
    "tests/unitcore//loaders/**/*.ts"
  ],

  "functionalSuites": "tests/functional/**/*.ts",

  "plugins": "tests/support/globalUi.ts",

  "node": {
    "suites": [
      "tests/unit/core/index.ts",
      "tests/unit/core/bin/intern.ts",
      "tests/unit/core/lib/executors/Node.ts",
      "tests/unit/core/lib/node/**/*.ts",
      "tests/unit/core/tasks/**/*.ts"
    ],
    "plugins": [
      "tests/support/nodeMocking.ts",
      "tests/support/nodeDom.ts",
      "source-map-support/register",
      // The URLSearchParams polyfill is needed for unit tests in Node 8
      "url-search-params-polyfill"
    ],
    "reporters": {
      "name": "runner",
      "options": { "hideSkipped": false, "hidePassed": false }
    },
    // Disable the built-in ts-node loader since the self tests use ts-node
    // externally
    "tsconfig": false
  },

  "browser": {
    "suites": [
      "_tests/tests/unit/lib/executors/Browser.js",
      "_tests/tests/unit/lib/browser/util.js",
      "_tests/tests/unit/lib/reporters/Dom.js",
      "_tests/tests/unit/lib/reporters/Html.js"
    ],
    "plugins": [
      "_tests/tests/support/browserDom.js",
      "_tests/tests/support/dojoMocking.js"
    ]
  },

  "benchmark": false,
  "filterErrorStack": true,
  "internPath": "src",

  "configs": {
    "progress": {
      "description": "For showing test progress",
      "node": {
        "reporters": {
          "name": "runner",
          "options": { "hideSkipped": true, "hidePassed": false }
        }
      }
    },

    "wd": {
      "description": "Run tests in Chrome using Selenium",
      "tunnel": "selenium",
      "environments": [
        { "browserName": "node" },
        {
          "browserName": "chrome",
          "fixSessionCapabilities": "no-detect"
        }
      ]
    },

    "ci": {
      "description": "Run CI tests on the default cloud service (BrowserStack)",
      "reporters+": {
        "name": "jsoncoverage",
        "options": {
          "filename": "coverage.json"
        }
      },
      "tunnel": "browserstack",
      "maxConcurrency": 2,
      "capabilities": {
        "idle-timeout": 60,
        "fixSessionCapabilities": "no-detect"
      },
      "environments": [
        { "browser": "node" },
        { "browser": "internet explorer", "version": ["10", "11"] },
        {
          "browser": "firefox",
          "version": ["57", "latest"],
          "platform": ["WINDOWS", "MAC"]
        },
        {
          "browser": "chrome",
          "version": ["62", "latest"],
          "platform": ["WINDOWS", "MAC"]
        },
        { "browser": "safari", "version": ["10"] }
      ]
    },

    "sauce": {
      "description": "Run CI tests on Sauce Labs",
      "extends": "ci",
      "tunnel": "saucelabs",
      "environments": [
        { "browser": "node" },
        { "browser": "internet explorer", "version": ["10", "11"] },
        {
          "browser": "firefox",
          "version": ["57", "latest"],
          "platform": ["Windows 10", "OS X 10.12"]
        },
        {
          "browser": "chrome",
          "version": ["62", "latest"],
          "platform": ["Windows 10", "OS X 10.12"]
        },
        { "browser": "safari", "version": ["10"] }
      ]
    }
  }
}
